<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>××’×“×™×¨ ×œ×—×™×•×ª ×“××™×•× ×™×•×ª</title>
  <style>
    :root {
      --bg: #f0f9ff;
      --panel: #ffffff;
      --text: #1e293b;
      --muted: #64748b;
      --accent: #3b82f6;
      --good: #10b981;
      --bad: #ef4444;
      --border: rgba(148,163,184,.25);
      --shadow: 0 4px 20px rgba(0,0,0,.08);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      background: 
                  radial-gradient(1000px 600px at 20% 10%, rgba(252,211,77,.4), transparent 50%),
                  radial-gradient(800px 500px at 80% 30%, rgba(251,146,60,.35), transparent 50%),
                  radial-gradient(900px 600px at 50% 80%, rgba(34,211,238,.4), transparent 50%),
                  radial-gradient(700px 500px at 90% 90%, rgba(167,139,250,.35), transparent 50%),
                  linear-gradient(135deg, #fef3c7 0%, #dbeafe 50%, #e0e7ff 100%);
      color: var(--text);
      min-height: 100vh;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,.85);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 2px 10px rgba(0,0,0,.05);
    }

    .wrap { 
      max-width: 900px; 
      margin: 0 auto; 
      padding: 16px; 
    }

    .topbar {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .brand {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .badge {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background: linear-gradient(135deg, #f59e0b, #ec4899, #8b5cf6);
      box-shadow: 0 4px 12px rgba(236,72,153,.3);
    }

    h1 {
      font-size: 18px;
      margin: 0;
      line-height: 1.2;
    }
    .sub {
      font-size: 12px;
      color: var(--muted);
      margin-top: 2px;
    }

    button, .pill {
      border: 1px solid var(--border);
      background: rgba(255,255,255,.8);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 14px;
      cursor: pointer;
      transition: transform .08s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
      user-select: none;
      font-size: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,.05);
    }

    button:hover { 
      background: rgba(255,255,255,1); 
      border-color: var(--accent);
      box-shadow: 0 4px 12px rgba(59,130,246,.15);
    }
    button:active { transform: translateY(1px); }

    .primary {
      border-color: var(--accent);
      background: var(--accent);
      color: white;
    }
    .primary:hover { 
      background: #2563eb;
      border-color: #2563eb;
      box-shadow: 0 4px 12px rgba(37,99,235,.25);
    }

    .yes {
      border-color: var(--good);
      background: var(--good);
      color: white;
      font-size: 16px;
      padding: 12px 24px;
    }
    .yes:hover { 
      background: #059669;
      border-color: #059669;
      box-shadow: 0 4px 12px rgba(16,185,129,.3);
    }

    .no {
      border-color: var(--bad);
      background: var(--bad);
      color: white;
      font-size: 16px;
      padding: 12px 24px;
    }
    .no:hover { 
      background: #dc2626;
      border-color: #dc2626;
      box-shadow: 0 4px 12px rgba(239,68,68,.3);
    }

    .card {
      background: rgba(255,255,255,.9);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 8px 24px rgba(0,0,0,.08);
      overflow: hidden;
      margin-bottom: 20px;
    }

    .cardBody { padding: 20px; }

    .imgContainer {
      position: relative;
      background: linear-gradient(135deg, rgba(251,191,36,.1), rgba(167,139,250,.1));
      border: 2px solid rgba(251,191,36,.3);
      border-radius: 16px;
      padding: 12px;
      margin-bottom: 20px;
      max-height: 50vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .creatureNumber {
      position: absolute;
      top: 24px;
      left: 24px;
      background: linear-gradient(135deg, #f59e0b, #ec4899);
      backdrop-filter: blur(10px);
      border: 2px solid white;
      color: white;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 18px;
      font-weight: 700;
      z-index: 10;
      direction: ltr;
      box-shadow: 0 4px 12px rgba(236,72,153,.4);
    }

    img {
      max-width: 100%;
      max-height: 48vh;
      width: auto;
      height: auto;
      border-radius: 12px;
      display: block;
      object-fit: contain;
    }

    .q {
      font-size: 20px;
      margin: 0 0 12px 0;
      line-height: 1.55;
      font-weight: 500;
    }
    .hint {
      margin: 0 0 16px 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.5;
    }

    .actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 20px;
      align-items: center;
      justify-content: center;
    }

    .resultName {
      font-size: 26px;
      margin: 0 0 12px 0;
      color: var(--accent);
      letter-spacing: .2px;
      text-align: center;
      font-weight: 600;
      line-height: 1.5;
    }

    .navHint {
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      margin-top: 16px;
      padding: 12px;
      background: rgba(148,163,184,.08);
      border-radius: 12px;
      border: 1px solid var(--border);
      line-height: 1.6;
    }

    @media (max-width: 600px) {
      .wrap { padding: 12px; }
      .cardBody { padding: 16px; }

      h1 { font-size: 16px; }
      .sub { font-size: 11px; }

      .q { font-size: 18px; }
      .hint { font-size: 13px; }

      .yes, .no {
        flex: 1;
        min-width: 120px;
      }

      .actions {
        flex-direction: column;
        width: 100%;
      }

      .actions button {
        width: 100%;
      }

      .creatureNumber {
        top: 16px;
        left: 16px;
        font-size: 16px;
        padding: 6px 12px;
      }

      .resultName { font-size: 22px; }

      #bottomNav {
        width: 100%;
        padding: 0 12px;
        box-sizing: border-box;
      }

      #prevBtn, #restartBtn, #nextBtn {
        flex: 1 1 auto;
        min-width: 90px;
        max-width: 140px;
        white-space: nowrap;
        font-size: 13px;
        padding: 12px 10px;
      }
    }
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="badge" aria-hidden="true"></div>
        <div>
          <h1>××’×“×™×¨ ×œ×—×™×•×ª ×“××™×•× ×™×•×ª</h1>
          <div class="sub">×‘×—×¨×• ×™×¦×•×¨ â†’ ×¢× ×• ×›×Ÿ/×œ× ×œ×¤×™ ×”×ª×›×•× ×•×ª â†’ ×§×‘×œ×• ××ª ×”×©×</div>
        </div>
      </div>
    </div>
  </div>
</header>

<main>
  <div class="wrap">
    <section class="card">
      <div class="cardBody">

        <div class="imgContainer" id="imgContainer">
          <div class="creatureNumber" id="creatureNumber">001</div>
          <img id="creatureImg" alt="×™×¦×•×¨ ×“××™×•× ×™" />
        </div>

        <div id="qaArea">
          <p class="q" id="questionText">×‘×¢×œ ××§×•×¨ ×‘×¨×•×¨?</p>
          <p class="hint" id="questionHint">×¢× ×• ×œ×¤×™ ××” ×©×¨×•××™× ×‘×ª××•× ×” ×œ××¢×œ×”</p>

          <div class="actions">
            <button class="yes" id="yesBtn">âœ“ ×›×Ÿ</button>
            <button class="no" id="noBtn">âœ— ×œ×</button>
          </div>
        </div>

        <div id="resultArea" style="display:none;">
          <p class="resultName" id="resultName"></p>
        </div>

        <div style="margin-top: 32px; padding-top: 20px; border-top: 1px solid var(--border); text-align: center; color: var(--muted); font-size: 13px;">
          ×¢×¨×™×›×”: ××™×œ×›×” ×‘×¨×§×• ×’×¨×©<br>
          ××§×•×¨: ×œ× ×™×“×•×¢
        </div>

        <div id="bottomNav" style="margin-top: 20px; margin-bottom: 20px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; max-width: 100%;">
          <button class="primary" id="prevBtn" style="touch-action: manipulation;">â† ×œ×™×¦×•×¨ ×”×§×•×“×</button>
          <button class="primary" id="restartBtn" style="touch-action: manipulation;">× ×™×¡×™×•×Ÿ ×—×•×–×¨</button>
          <button class="primary" id="nextBtn" style="touch-action: manipulation;">×œ×™×¦×•×¨ ×”×‘× â†’</button>
        </div>

      </div>
    </section>
  </div>
</main>

<script>
  const IMAGES = [
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/1%20%D7%97%D7%A9%D7%95%D7%A3%20%D7%92%D7%95%D7%9C%D7%92%D7%95%D7%9C%D7%AA%20%D7%9E%D7%A2%D7%95%D7%A4%D7%A3.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/2%20%D7%96%D7%97%D7%9C%D7%9F%20%D7%99%D7%9E%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/3%20%D7%9C%D7%99%D7%9C%D7%99%D7%AA%20%D7%96%D7%A8%D7%99%D7%96%D7%94.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/4%20%D7%A0%D7%91%D7%A8%D7%9F%20%D7%9E%D7%93%D7%95%D7%9E%D7%94.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/5%20%D7%92%D7%A8%D7%A4%D7%99%D7%9C%D7%93%20%D7%A6%D7%A4%D7%95%D7%A0%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/6%20%D7%90%D7%92%D7%95%D7%96%D7%9F%20%D7%9E%D7%A7%D7%95%D7%A4%D7%A3.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/7%20%D7%A8%D7%91%20%D7%A8%D7%92%D7%9C%20%D7%A2%D7%92%D7%9C%D7%92%D7%9C.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/8%20%D7%A4%D7%A8%D7%A6%D7%99%D7%A4%D7%9C%D7%95%D7%9A%20%D7%9E%D7%A6%D7%95%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/9%20%D7%A7%D7%95%D7%A7%D7%A8%D7%A6'%D7%94%20%D7%9E%D7%A4%D7%95%D7%A1%D7%A4%D7%A1%D7%AA.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/10%20%D7%A9%D7%9B%D7%9C%D7%9F%20%D7%9E%D7%98%D7%A4%D7%A1.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/11%20%D7%A7%D7%95%D7%A7%D7%A8%D7%A6'%D7%94%20%D7%A9%D7%97%D7%95%D7%A8%D7%94.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/12%20%D7%97%D7%A8%D7%98%D7%98%D7%9F%20%D7%92%D7%93%D7%95%D7%9C.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/13%20%D7%91%D7%99%D7%A6%D7%A0%D7%99%D7%AA%20%D7%A9%D7%98%D7%95%D7%97%D7%AA%20%D7%9E%D7%A7%D7%95%D7%A8.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/14%20%D7%92%D7%A8%D7%92%D7%A8%D7%9F%20%D7%9E%D7%A6%D7%95%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/15%20%D7%90%D7%95%D7%9B%D7%9C%20%D7%A2%D7%95%D7%92%D7%99%D7%95%D7%AA%20%D7%9E%D7%A6%D7%95%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/16%20%D7%A9%D7%A8%D7%A4%D7%9B%D7%A3%20%D7%94%D7%97%D7%95%D7%9C%D7%95%D7%AA.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/17%20%D7%91%D7%99%D7%A9%D7%9F%20%D7%94%D7%A2%D7%A6%D7%99%D7%9D.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/18%20%D7%A0%D7%99%D7%A0%D7%92'%D7%94%20%D7%A6%D7%94%D7%95%D7%91%D7%94.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/19%20%D7%A9%D7%97%D7%99%D7%99%D7%9F%20%D7%94%D7%A2%D7%9E%D7%A7%D7%99%D7%9D.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/20%20%D7%92'%D7%95%D7%A7%20%D7%9E%D7%9C%D7%9E%D7%A7%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/21%20%D7%A7%D7%A9%D7%A7%D7%A9%D7%9F%20%D7%94%D7%A0%D7%97%D7%9C%D7%99%D7%9D.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/22%20%D7%AA%D7%95%D7%9C%D7%A2%D7%9F%20%D7%94%D7%99%D7%A2%D7%A8%D7%95%D7%AA.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/23%20%D7%90%D7%95%D7%9B%D7%9C%20%D7%A2%D7%95%D7%92%D7%99%D7%95%D7%AA%20%D7%9E%D7%A4%D7%95%D7%A1%D7%A4%D7%A1.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/24%20%D7%9E%D7%A4%D7%A6%D7%97%20%D7%97%D7%A6%D7%99%D7%9C%D7%99%D7%9D%20%D7%A6%D7%A4%D7%95%D7%A0%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/25%20%D7%A4%D7%A0%D7%98%D7%A4%D7%95%D7%93%20%D7%90%D7%A8%D7%A1%D7%99.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/26.%20%D7%91%D7%99%D7%99%D7%A9%D7%9F%20%D7%94%D7%A9%D7%93%D7%95%D7%AA.png",
    "https://raw.githubusercontent.com/milkabcd-dot/Imaginary-animals/main/27%20%D7%98%D7%95%D7%A8%20%D7%9E%D7%AA%D7%9B%D7%A0%D7%A1.png"
  ];

  const CREATURE_COUNT = IMAGES.length;

  const CORRECT_ANSWERS = {
    1: "×—×©×•×£ ×’×•×œ×’×•×œ×ª ××¢×•×¤×£",
    2: "×–×—×œ×Ÿ ×™××™",
    3: "×œ×™×œ×™×ª ×–×¨×™×–×”",
    4: "× ×‘×¨×Ÿ ××“×•××”",
    5: "×’×¨×¤×™×œ×“ ×¦×¤×•× ×™",
    6: "××’×•×–×Ÿ ××§×•×¤×£",
    7: "×¨×‘ ×¨×’×œ ×¢×’×œ×’×œ",
    8: "×¤×¨×¦×™×¤×œ×•×š ××¦×•×™",
    9: "×§×•×§×¨×¦'×” ××¤×•×¡×¤×¡×ª",
    10: "×©×›×œ×Ÿ ××˜×¤×¡",
    11: "×§×•×§×¨×¦'×” ×©×—×•×¨×”",
    12: "×—×¨×˜×˜×Ÿ ×’×“×•×œ",
    13: "×‘×™×¦× ×™×ª ×©×˜×•×—×ª ××§×•×¨",
    14: "×’×¨×’×¨×Ÿ ××¦×•×™",
    15: "××•×›×œ ×¢×•×’×™×•×ª ××¦×•×™",
    16: "×©×¨×¤×›×£ ×”×—×•×œ×•×ª",
    17: "×‘×™×©×Ÿ ×”×¢×¦×™×",
    18: "× ×™× ×’'×” ×¦×”×•×‘×”",
    19: "×©×—×™×™×Ÿ ×”×¢××§×™×",
    20: "×’'×•×§ ××œ××§×™",
    21: "×§×©×§×©×Ÿ ×”× ×—×œ×™×",
    22: "×ª×•×œ×¢×Ÿ ×”×™×¢×¨×•×ª",
    23: "××•×›×œ ×¢×•×’×™×•×ª ××¤×•×¡×¤×¡",
    24: "××¤×¦×— ×—×¦×™×œ×™× ×¦×¤×•× ×™",
    25: "×¤× ×˜×¤×•×“ ××¨×¡×™",
    26: "×‘×™×©×Ÿ ×”×©×“×•×ª",
    27: "×˜×•×¨ ××ª×›× ×¡"
  };

  function pad3(n) { return String(n).padStart(3, "0"); }
  function imagePath(index1based) { return IMAGES[index1based - 1]; }
  function clamp(v, a, b) { return Math.max(a, Math.min(b, v)); }

  const TREE = {
    1: { q: "×‘×¢×œ ××§×•×¨ ×‘×¨×•×¨?", yes: 2, no: 7 },
    2: { q: "×‘×¢×œ ×›× ×¤×™×™×?", yes: 3, no: { leaf: "××¤×¦×— ×—×¦×™×œ×™× ×¦×¤×•× ×™" } },
    3: { q: "×‘×¢×œ ×¨×’×œ×™×™× ××¨×•×›×•×ª ×‘××™×•×—×“?", yes: 4, no: 5 },
    4: { q: "×‘×¢×œ ××§×•×¨ ××¨×•×š ×•×©×˜×•×—?", yes: { leaf: "×‘×™×¦× ×™×ª ×©×˜×•×—×ª ××§×•×¨" }, no: { leaf: "×¤×¨×¦×™×¤×œ×•×š ××¦×•×™" } },
    5: { q: "×‘×¢×œ ××§×•×¨ ×’×“×•×œ ×•×¨×—×‘?", yes: { leaf: "×ª×•×œ×¢×Ÿ ×”×™×¢×¨×•×ª" }, no: 6 },
    6: { q: "×‘×¢×œ ××§×•×¨ ××¨×•×š ×•×¦×¨?", yes: { leaf: "×©×¨×¤×›×£ ×”×—×•×œ×•×ª" }, no: { leaf: "×ª×•×œ×¢×Ÿ ×”×—×•×£" } },

    7: { q: "×™×© ×œ×• ×™×•×ª×¨ ×Ö¾6 ×¨×’×œ×™×™×?", yes: 8, no: 12 },
    8: { q: "×‘×¢×œ 12 ×¨×’×œ×™×™×?", yes: { leaf: "×¨×‘ ×¨×’×œ ×¢×’×œ×’×œ" }, no: 9 },
    9: { q: "×‘×¢×œ 8 ×¨×’×œ×™×™×?", yes: 10, no: { leaf: "×–×—×œ×Ÿ ×™××™" } },
    10:{ q: "×›×œ ×–×•×’ ×¨×’×œ×™×™× ×™×•×¦× ××¤×¨×§ × ×¤×¨×“?", yes: { leaf: "× ×™× ×’'×” ×¦×”×•×‘×”" }, no: 11 },
    11:{ q: "×‘×¢×œ ×’×•×£ ×©×—×•×¨?", yes: { leaf: "×§×•×§×¨×¦'×” ×©×—×•×¨×”" }, no: { leaf: "×§×•×§×¨×¦'×” ××¤×•×¡×¤×¡×ª" } },

    12:{ q: "×‘×¢×œ ×¡× ×¤×™×¨×™×?", yes: 13, no: 15 },
    13:{ q: "×‘×¢×œ ×‘×œ×•×¨×™×ª ×©×™×¢×¨?", yes: { leaf: "×§×©×§×©×Ÿ ×”× ×—×œ×™×" }, no: 14 },
    14:{ q: "×‘×¢×œ ×’×•×£ ×©××Ÿ ×•× ×¤×•×—?", yes: { leaf: "×©×—×™×™×Ÿ × ×¤×•×—" }, no: { leaf: "×©×—×™×™×Ÿ ×”××’××™×" } },

    15:{ q: "×‘×¢×œ ×§×©×§×©×™× ×‘×¨×•×¨×™×?", yes: 16, no: 18 },
    16:{ q: "×‘×¢×œ ××£ ××¨×•×š ×•×¦×¨?", yes: { leaf: "×’×¨×’×¨×Ÿ ××¦×•×™" }, no: 17 },
    17:{ q: "×‘×¢×œ ×œ×©×•×Ÿ ××¤×•×¦×œ×ª?", yes: { leaf: "××•×›×œ ×¢×•×’×™×•×ª ××¦×•×™" }, no: { leaf: "××•×›×œ ×¢×•×’×™×•×ª ××¤×•×¡×¤×¡" } },

    18:{ q: "×‘×¢×œ ×–× ×‘ ××¨×•×š ×‘××™×•×—×“?", yes: 19, no: 23 },
    19:{ q: "×‘×¢×œ ×©×™×¢×¨ ×©×—×•×¨ ×•××¨×•×š ×™×—×¡×™×ª?", yes: { leaf: "× ×‘×¨×Ÿ ××“×•××”" }, no: 20 },
    20:{ q: "×‘×¢×œ ×¢×™× ×™×™× ×’×“×•×œ×•×ª ×•××‘×•×”×œ×•×ª?", yes: { leaf: "×‘×™×©×Ÿ ×”×¢×¦×™×" }, no: 21 },
    21:{ q: "×‘×¢×œ ××¦×‘×¢×•×ª ×¨×’×œ×™×™× ××¨×•×›×•×ª?", yes: { leaf: "×©×›×œ×Ÿ ××˜×¤×¡" }, no: 22 },
    22:{ q: "×‘×¢×œ ×–× ×‘ ×¢×‘×” ×•××¤×•×¡×¤×¡?", yes: { leaf: "×’×¨×¤×™×œ×“ ×¦×¤×•× ×™" }, no: { leaf: "××’×•×–×Ÿ ××§×•×¤×£" } },

    23:{ q: "×‘×¢×œ ××—×•×©×™× (×× ×˜× ×•×ª?)", yes: 24, no: 26 },
    24:{ q: "×‘×¢×œ ×›× ×¤×™×™× ×‘×¨×•×¨×•×ª?", yes: { leaf: "×œ×™×œ×™×ª ×–×¨×™×–×”" }, no: 25 },
    25:{ q: "××—×•×©×™× ××¨×•×›×™× ×××•×¨×š ×”×’×•×£?", yes: { leaf: "×’'×•×§ ××œ××§×™" }, no: { leaf: "×¤× ×˜×¤×•×“ ××¨×¡×™" } },

    26:{ q: "×œ×œ× × ×•×¦×•×ª?", yes: 27, no: { leaf: "×—×©×•×£ ×’×•×œ×’×•×œ×ª ××¢×•×¤×£" } },
    27:{ q: "×‘×¢×œ ×–× ×‘ ×‘×¨×•×¨?", yes: 28, no: 30 },
    28:{ q: "×‘×¢×œ ×¢×™× ×™×™× ×’×“×•×œ×•×ª ×‘××™×•×—×“?", yes: { leaf: "×‘×™×©×Ÿ ×”×©×“×•×ª" }, no: 29 },
    29:{ q: "×‘×¢×œ ×©×™× ×™×™× ×’×“×•×œ×•×ª ×•×‘×•×œ×˜×•×ª?", yes: { leaf: "×—×ª×œ×ª×•×œ ×§×˜×œ× ×™" }, no: { leaf: "×¦'×™×§××•×§ ××¦'×•×§××§" } },
    30:{ q: "×‘×¢×œ ×§×¨× ×™×™×?", yes: { leaf: "×˜×•×¨ ××ª×›× ×¡" }, no: { leaf: "×—×¨×˜×˜×Ÿ ×’×“×•×œ" } },
  };

  let currentCreature = 1;
  let nodeId = 1;

  const creatureNumber = document.getElementById("creatureNumber");
  const creatureImg  = document.getElementById("creatureImg");
  const imgContainer = document.getElementById("imgContainer");

  const qaArea = document.getElementById("qaArea");
  const resultArea = document.getElementById("resultArea");

  const questionText = document.getElementById("questionText");
  const questionHint = document.getElementById("questionHint");
  const resultName = document.getElementById("resultName");

  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");

  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const restartBtn = document.getElementById("restartBtn");

  function resetQuiz() {
    nodeId = 1;
    resultArea.style.display = "none";
    qaArea.style.display = "block";
    imgContainer.style.display = "flex";
    renderNode();
  }

  function renderNode() {
    const node = TREE[nodeId];
    if (!node) {
      showResult("×©×’×™××”: ×¦×•××ª ×œ× ×§×™×™× ×‘×¢×¥");
      return;
    }

    questionText.textContent = node.q;
    questionHint.textContent = "×¢× ×• ×œ×¤×™ ××” ×©×¨×•××™× ×‘×ª××•× ×” ×œ××¢×œ×”";
  }

  function showResult(name) {
    qaArea.style.display = "none";
    resultArea.style.display = "block";

    const correctAnswer = CORRECT_ANSWERS[currentCreature];
    const isCorrect = name === correctAnswer;

    if (isCorrect) {
      resultName.innerHTML = `âœ… <span style="color: var(--good);">×›×œ ×”×›×‘×•×“!</span><br>${name}`;
    } else {
      resultName.innerHTML = `âŒ <span style="color: var(--bad);">×˜×¢×™×ª×!</span><br>×§×™×‘×œ×ª×: ${name}<br><span style="font-size: 18px; color: var(--muted);">×”×ª×©×•×‘×” ×”× ×›×•× ×”: ${correctAnswer}</span>`;
    }
  }

  function answer(isYes) {
    const node = TREE[nodeId];
    if (!node) return;

    const next = isYes ? node.yes : node.no;

    if (typeof next === "number") {
      nodeId = next;
      renderNode();
    } else if (next && typeof next === "object" && next.leaf) {
      showResult(next.leaf);
    } else {
      showResult("×©×’×™××”: ×™×¢×“ ×œ× ×ª×§×™×Ÿ ×‘×¢×¥");
    }
  }

  function showFinishScreen() {
    imgContainer.style.display = "none";
    qaArea.style.display = "none";
    resultArea.style.display = "block";

    resultName.innerHTML = `
      <div style="font-size: 28px; font-weight: 700; color: var(--good); margin-bottom: 14px;">
        ğŸ‰ ×¡×™×™××ª×, ×›×œ ×”×›×‘×•×“!
      </div>

      <div class="navHint" style="font-size: 15px;">
        <b>××’×“×™×¨ ×“×™×›×•×˜×•××™</b> ×”×•× ×›×œ×™ ××“×¢×™ ×”××©××© ×œ×–×™×”×•×™ ×•××™×•×Ÿ ×¤×¨×™×˜×™× (×›×’×•×Ÿ ×¦××—×™×, ×‘×¢×œ×™ ×—×™×™× ××• ×—×¤×¦×™×)
        ×¢×œ ×‘×¡×™×¡ ×‘×—×™×¨×” ×¢×§×‘×™×ª ×‘×™×Ÿ ×©×ª×™ ×ª×›×•× ×•×ª ×× ×•×’×“×•×ª.<br><br>
        ×”×•× ××‘×•×¡×¡ ×¢×œ ×¦××“×™ ×‘×™×˜×•×™×™× (×“×™×›×•×˜×•××™×” â€“ ×—×œ×•×§×” ×œ×©× ×™×™×) ×”×××¤×©×¨×™× ×œ××©×ª××© ×œ×¦××¦× ××ª ×”××¤×©×¨×•×™×•×ª
        ×¢×“ ×œ×”×’×¢×” ×œ×–×™×”×•×™ ×”×¡×•×¤×™.
        <br><br>
        <b>×©×œ×›× ×‘××”×‘×”: ××™×œ×›×” ×‘×¨×§×• ×’×¨×©</b>
      </div>

      <div style="margin-top: 18px;">
        <button class="primary" onclick="setCreature(1)">ğŸ” ×”×ª×—×œ×” ××—×“×©</button>
      </div>
    `;
  }

  function setCreature(index1based) {
    currentCreature = clamp(index1based, 1, CREATURE_COUNT);

    creatureNumber.textContent = pad3(currentCreature);
    creatureImg.src = imagePath(currentCreature);
    creatureImg.alt = `×™×¦×•×¨ ${pad3(currentCreature)}`;

    resetQuiz();
  }

  yesBtn.addEventListener("click", (e) => {
    e.preventDefault();
    answer(true);
  });

  noBtn.addEventListener("click", (e) => {
    e.preventDefault();
    answer(false);
  });

  prevBtn.addEventListener("click", (e) => {
    e.preventDefault();
    if (currentCreature === 1) return;
    setCreature(currentCreature - 1);
  });

  nextBtn.addEventListener("click", (e) => {
    e.preventDefault();

    if (currentCreature === CREATURE_COUNT) {
      showFinishScreen();
      return;
    }

    setCreature(currentCreature + 1);
  });

  restartBtn.addEventListener("click", (e) => {
    e.preventDefault();
    resetQuiz();
  });

  document.addEventListener("keydown", (e) => {
    const k = e.key.toLowerCase();
    if (k === "y") answer(true);
    if (k === "n") answer(false);
    if (e.key === "ArrowLeft") setCreature(currentCreature - 1);
    if (e.key === "ArrowRight") setCreature(currentCreature + 1);
    if (k === "r") resetQuiz();
  });

  setCreature(1);
</script>

</body>
</html>
